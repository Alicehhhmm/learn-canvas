<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>NND - Canvas Learning Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="stylesheet" type="text/css" href="/styles/main.css">
</head>

<body>
    <div class="canvas-bg">
        <canvas id="bgcanvas"></canvas>
    </div>

    <section class="home-container">
        <header class="nav-header">
            <div class="logo">
                <a href="/">N<span><i>N</i></span>Docs</a>
            </div>
            <nav>
                <a href="/manual/basic-api/index.html" class="nav-item">
                    <i>📄</i> API
                </a>
                <a href="/manual/index.html" class="nav-item">
                    <i>📚</i> Learn
                </a>
                <a href="/examples/index.html" class="nav-item">
                    <i>🔭</i> Example
                </a>
                <a href="https://github.com/Alicehhhmm/learn-canvas" target="_blank" class="nav-item">
                    <svg class="repo-icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px"
                        viewBox="0 0 24 24" fill="#555">
                        <path
                            d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                    </svg>
                </a>
                <a href="#" class="sponsor-btn">
                    <i>❤️</i> Sponsor
                </a>
            </nav>
        </header>

        <main class="main-content">
            <div class="left-content">
                <h1><i>Canvas <br> learn guide.</i></h1>
                <p class="subtitle"> hi I'm Norush. this my canvas learn manual</p>
                <p class="subtitle"> 本册子，记录了从零到进阶的系统化学习路径。</p>
                <p class="subtitle"> 通过案例驱动，由浅入深的形式探索HTML5 Canvas核心技术。</p>
                <p class="subtitle"> </p>
                <div class="bottom-actions">
                    <a href="manual/index.html" class="start-badge">
                        <b>Start reading </b><i>></i>
                    </a>
                    <a href="https://github.com/Alicehhhmm/learn-canvas" class="github-start" target="_blank">
                        <span></span><b>Github Start ✨</b>
                    </a>
                </div>
            </div>
            <div class="right-content">
                <div class="visualization">
                    <img class="placeholder-image" src="/public/creative.png" alt="">
                </div>
            </div>
        </main>
        <!-- TODO: 学习路线轴（上到下滑动时收滚动条控制，显示不同阶段对应的内容） -->

        <footer>
            <div class="copyright">
                <p>&copy; 2025 by <i>Norush. </i></p>
            </div>
            <div class="sponsors">
                <div class="sponsor-logo">N</div>
                <div class="sponsor-logo">C</div>
                <div class="sponsor-logo">D</div>
            </div>
        </footer>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
        function initAnimation (params) {
            // Animate header elements on page load
            const headerElements = document.querySelectorAll('header *');
            headerElements.forEach((el, index) => {
                anime({
                    targets: el,
                    translateY: [20, 0],
                    opacity: [0, 1],
                    easing: 'easeOutExpo',
                    duration: 500,
                    delay: index * 100,
                });
            });

            // Animate main content elements on page load
            const mainElements = document.querySelectorAll('.left-content *');
            mainElements.forEach((el, index) => {
                anime({
                    targets: el,
                    opacity: [0, 1],
                    easing: 'easeOutExpo',
                    duration: 800,
                    delay: index * 200 + 600,
                });
            });

            // Add animation to the visualization placeholder
            const placeholder = document.querySelector('.placeholder-image');
            anime({
                targets: placeholder,
                scale: [
                    { value: 1, duration: 0 },
                    { value: 1.05, duration: 1000 },
                    { value: 1, duration: 500 }
                ],
                loop: true,
                direction: 'normal',
                easing: 'easeInOutQuad',
                delay: 1500,
            });

            // Animate example cards when they come into view
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        anime({
                            targets: entry.target,
                            translateY: [50, 0],
                            opacity: [0, 1],
                            easing: 'easeOutExpo',
                            duration: 800,
                        });
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.example-card').forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                observer.observe(card);
            });

            document.querySelectorAll('.module-card').forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                observer.observe(card);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            initAnimation();
        });
    </script>

    <script>
        // 🎯 动画集中调度器
        class AnimationLoop {
            constructor() {
                this.updaters = new Set();
                this.animate = this.animate.bind(this);
                requestAnimationFrame(this.animate);
            }

            add (fn) {
                this.updaters.add(fn);
            }

            animate (time) {
                this.updaters.forEach(fn => fn(time));
                requestAnimationFrame(this.animate);
            }
        }

        const loop = new AnimationLoop();
    </script>
    <script>
        // ✨ 粒子动态背景
        class Particlex {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.resize();
                window.addEventListener('resize', () => this.resize());
                loop.add(() => this.update());
            }

            resize () {
                this.canvas.width = this.canvas.clientWidth;
                this.canvas.height = this.canvas.clientHeight;
                this.initParticles();
            }

            initParticles () {
                const count = 120;
                this.particles = Array.from({ length: count }, () => ({
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * this.canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                }));
            }

            update () {
                const { ctx, particles } = this;
                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                for (let p of particles) {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > this.canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > this.canvas.height) p.vy *= -1;
                }

                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const a = particles[i], b = particles[j];
                        const dx = a.x - b.x, dy = a.y - b.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        // 两点之间的距离小于 100 时，绘制连线
                        if (dist < 100) {
                            ctx.strokeStyle = `rgba(0, 209, 255, ${1 - dist / 100})`;
                            ctx.beginPath();
                            ctx.moveTo(a.x, a.y);
                            ctx.lineTo(b.x, b.y);
                            ctx.stroke();
                        }
                    }
                }

                for (let p of particles) {
                    ctx.fillStyle = '#00d1ff';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // new Particlex(document.getElementById('bgcanvas'));
    </script>

    <script>
        // 粒子动态背景
        const canvas = document.getElementById('bgcanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let hue = 0;

        function resizeCanvas () {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        class Particle {
            constructor() {
                this.reset();
            }

            reset () {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 1.5;
                this.vy = (Math.random() - 0.5) * 1.5;
                this.radius = Math.random() * 1.5 + 0.5;
            }

            update () {
                this.x += this.vx;
                this.y += this.vy;

                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }

            draw () {
                ctx.beginPath();
                ctx.fillStyle = `hsl(${hue}, 100%, 70%)`;
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function animate () {
            // 全画布清除（修复痕迹残留的核心）
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ctx.fillStyle = 'rgba(0,0, 0, 0.15)';
            // ctx.fillStyle = 'rgba(2, 5, 20, 0.1)';
            // ctx.fillRect(0, 0, canvas.width, canvas.height);
            hue += 0.5;

            particles.forEach(p => {
                p.update();
                p.draw();

                particles.forEach(p2 => {
                    const dx = p.x - p2.x;
                    const dy = p.y - p2.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < 80) {
                        ctx.beginPath();
                        ctx.strokeStyle = `hsla(${hue}, 100%, 70%, ${1 - dist / 80})`;
                        ctx.lineWidth = 0.2;
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }
                });
            });

            requestAnimationFrame(animate);
        }

        function initBgParticles () {
            resizeCanvas();
            particles = Array.from({ length: 100 }, () => new Particle());
            animate();
        }
        initBgParticles();

        window.addEventListener('resize', resizeCanvas);
    </script>
</body>

</html>