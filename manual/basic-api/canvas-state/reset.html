<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas State Api - Reset / 绘制状态-重置</title>
    <style>
        canvas {
            border: 1px solid goldenrod;
        }
    </style>
</head>

<body>
    <canvas id="canvas2d" width="600" height="400">
        The current browser does not support canvas
    </canvas>

    <script>
        const canvas = document.getElementById('canvas2d');

        if (canvas.getContext) {
            var ctx = canvas.getContext("2d");

            // 画布状态管理-重置 (实例方法)
            // reset() 方法将当前的绘图状态重置为初始状态。
            // - 该方法会将所有绘图属性恢复为默认值，但不会清除画布上的内容。

            // 重置操作会清除后备缓冲区、绘制状态堆栈、任何定义的路径和样式。
            // 这包括当前的变换矩阵、合成属性、裁剪区域、虚线列表、线型、文本样式、阴影、图像平滑、滤镜等等。

            //  reset 与 clearRect 的区别：
            // - 重置 (reset) 不会清空画布内容，只是将绘图状态重置为默认值。
            // - 而清空 (clearRect) 会清除画布上的所有内容，但保留绘图状态。
            // 案例： @/examples/reset-and-clearRect.html


            // 如下将演示如何使用 reset() 方法重置当前的绘图状态.
            // - 先定义一些属性：绿色填充、红色描边、线条宽度5。
            // - 然后绘制一个矩形 A1，使用自定义填充颜色和线条宽度。
            // - 接着使用 reset() 方法重置绘图状态为初始状态。


            // 预期结果：
            // - 未使用 reset() 方法前，显示填充色为绿色，描边色为红色的矩形 A1 A2 
            // - 使用 reset() 方法后，只显示矩形 A2 且填充色为默认值（黑色），描边色为默认值（黑色）

            // 定义属性样式
            ctx.fillStyle = "green";
            ctx.lineWidth = 5;
            ctx.strokeStyle = "red";

            // 绘制参考矩形: A1，使用绿色填充,红色描边
            ctx.beginPath();
            ctx.fillRect(50, 50, 100, 100);
            ctx.strokeRect(50, 50, 100, 100);
            ctx.closePath();


            // 重置绘图状态为初始状态
            // - 通过手动注释观察重置前后的效果
            ctx.reset();

            // 绘制矩形 A2，使用默认填充色和线条宽度
            ctx.beginPath();
            ctx.fillRect(200, 50, 100, 100);
            ctx.strokeRect(200, 50, 100, 100);
            ctx.closePath();
        }
    </script>
</body>

</html>